# ì˜ì¡´ì„± ì£¼ì…(DI)
**DI(Dependency Injection)** : ê°ì²´ê°€ í•„ìš”ë¡œ í•˜ëŠ” ì˜ì¡´ ê°ì²´ë¥¼ ì™¸ë¶€ì—ì„œ ì œê³µí•˜ëŠ” ë°©ì‹(ê°ì²´ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” ë° ë„ì›€)

![image.png](../../image/dependency_injection.png)

**í´ë¼ì´ì–¸íŠ¸ í´ë˜ìŠ¤ :** ì„œë¹„ìŠ¤ì— ì˜ì¡´

**ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ :** í´ë¼ì´ì–¸íŠ¸ í´ë˜ìŠ¤ì— ì„œë¹„ìŠ¤ë¥¼ ì œê³µ

**Injector í´ë˜ìŠ¤ :** ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ê°ì²´ë¥¼ í´ë¼ì´ì–¸íŠ¸ í´ë˜ìŠ¤ì— ì£¼ì…í•˜ëŠ” ì—­í• 

## **ì˜ì¡´ì„± ì£¼ì… ë°©ì‹**

**ìƒì„±ì ì£¼ì…(Constructor Injection) :** ê°ì²´ ìƒì„± ì‹œì ì— ìƒì„±ìë¥¼ í†µí•´ ì˜ì¡´ì„±ì„ ì£¼ì…(**ê¶Œì¥**)

```java
@Component
public class OrderService {
    private final PaymentService paymentService;
    @Autowired
    public OrderService(PaymentService paymentService) {
        this.paymentService = paymentService;
    }
}
```

`final` í‚¤ì›Œë“œ ì‚¬ìš© ê°€ëŠ¥ â†’ ë¶ˆë³€ì„± ìœ ì§€

ìˆœí™˜ ì°¸ì¡°(Circular Dependency) ë¬¸ì œë¥¼ ì¡°ê¸°ì— ë°œê²¬ ê°€ëŠ¥

í…ŒìŠ¤íŠ¸ ì‹œ ëª…í™•í•œ ì˜ì¡´ì„± ì£¼ì… ê°€ëŠ¥

---

**í•„ë“œ ì£¼ì… (Field Injection) :** í•„ë“œì— `@Autowired`ë¥¼ ì§ì ‘ ì ìš©í•˜ëŠ” ë°©ì‹(ê¶Œì¥X)

```java
@Component
public class OrderService {
    @Autowired
    private PaymentService paymentService;
}
```

ğŸ”¹ **ë‹¨ì **

`final` ì‚¬ìš© ë¶ˆê°€ â†’ ì˜ì¡´ì„±ì„ ë³€ê²½í•  ìˆ˜ ìˆì–´ ë¶ˆì•ˆì •í•¨

DI ì»¨í…Œì´ë„ˆ ì—†ì´ ê°ì²´ ìƒì„±ì´ ì–´ë ¤ì›€ (í…ŒìŠ¤íŠ¸ ë¶ˆí¸)

ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë¥¼ ëŸ°íƒ€ì„ ì‹œì ì—ì„œ ë°œê²¬

---

**ìˆ˜ì •ì(Setter) ì£¼ì… :** setter ë©”ì„œë“œë¥¼ í†µí•´ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” ë°©ì‹(**ì„ íƒì  ì˜ì¡´ì„±ì— ì í•©)**

```java
@Component
public class OrderService {
    private PaymentService paymentService;
    @Autowired
    public void setPaymentService(PaymentService paymentService) {
        this.paymentService = paymentService;
    }
}
```

ì„ íƒì  ì˜ì¡´ì„± ì£¼ì… ê°€ëŠ¥

í…ŒìŠ¤íŠ¸ì—ì„œ Mock ê°ì²´ ì£¼ì… ìš©ì´

í•„ìˆ˜ ì˜ì¡´ì„± ì£¼ì…ì„ ë³´ì¥í•  ìˆ˜ ì—†ìŒ

ê°ì²´ ìƒíƒœê°€ ë³€í•  ê°€ëŠ¥ì„±ì´ ìˆìŒ (ë¶ˆë³€ì„± X)

## **Springì—ì„œ ì˜ì¡´ì„± ì£¼ì…ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•**

**@Componentì™€ @Autowiredì‚¬ìš©(Springì´ ì§ì ‘ ê´€ë¦¬)**

```java
@Component
public class PaymentService {
    public void processPayment() {
        System.out.println("ê²°ì œ ì²˜ë¦¬");
    }
}

@Component
public class OrderService {
    private final PaymentService paymentService;
    @Autowired
    public OrderService(PaymentService paymentService) {
        this.paymentService = paymentService;
    }
}
```

`@Component`ë¥¼ ë¶™ì´ë©´ **Spring ì»¨í…Œì´ë„ˆê°€ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ë¹ˆ(bean)ìœ¼ë¡œ ë“±ë¡**í•˜ê³ , `@Autowired`ë¥¼ ì‚¬ìš©í•˜ë©´ **ìë™ìœ¼ë¡œ ì˜ì¡´ì„±ì´ ì£¼ì…**

---

**@Configurationê³¼ @Beanì‚¬ìš©(ìˆ˜ë™ ë“±ë¡)**

```java
@Configuration
public class AppConfig {
    @Bean
    public PaymentService paymentServicã…”
    e() {
        return new PaymentService();
    }
    @Bean
    public OrderService orderService() {
        return new OrderService(paymentService());
    }
}
```

 `@Bean`ì„ ì‚¬ìš©í•˜ë©´ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì£¼ì…í•  ìˆ˜ ìˆìœ¼ë©°, **ëª…í™•í•œ ì˜ì¡´ ê´€ê³„ë¥¼ ì„¤ì • í•  ìˆ˜ ìˆìŒ**

ë¹ˆ(Bean) : ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” ìë°” ê°ì²´

ì˜ì¡´ : í´ë˜ìŠ¤ Aê°€ í´ë˜ìŠ¤ Bì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤ê³  í•˜ë©´ AëŠ” Bì— ì˜ì¡´

ìˆœí™˜ ì°¸ì¡° : ë‘˜ ì´ìƒì˜ í´ë˜ìŠ¤ë‚˜ ë¹ˆ(Bean)ì´ ì„œë¡œë¥¼ ì°¸ì¡°í•˜ëŠ” ìƒí™©ì„ ì˜ë¯¸